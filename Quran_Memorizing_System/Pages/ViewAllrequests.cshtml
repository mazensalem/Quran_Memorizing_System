@page
@model Quran_Memorizing_System.Pages.ViewAllrequestsModel
@{
    @using System.Data;
}

@section Styles {
    <link rel="stylesheet" href="~/css/requests.css" asp-append-version="true" />
}

<div class="container pt-4">
    <h2 class="mb-3">Session Requests</h2>

    <div class="requests-list">
        @foreach (DataRow session in Model.Sessions.Rows)
        {
            <div class="request-card">
                <div class="request-info">
                    <p><strong>Email:</strong> @session["participant_email"]</p>
                    <p><strong>Session date:</strong> @session["session_date"]</p>
                    <p><strong>Start page:</strong> @session["start_page"]</p>
                    <p><strong>End page:</strong> @session["end_page"]</p>
                </div>

                <div class="request-actions">
                    <form method="post" asp-page-handler="Accept" asp-route-id="@session["Session_ID"]" class="d-inline">
                        <button type="submit" class="btn btn-success btn-sm">Accept</button>
                    </form>
                    <form method="post" asp-page-handler="Deny" asp-route-id="@session["Session_ID"]" class="d-inline ms-2">
                        <button type="submit" class="btn btn-danger btn-sm">Deny</button>
                    </form>
                </div>
            </div>
        }
    </div>
</div>
