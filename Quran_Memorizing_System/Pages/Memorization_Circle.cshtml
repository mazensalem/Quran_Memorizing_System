@page
@model Quran_Memorizing_System.Pages.MemorizationCircleModel
@{
    @using System.Data
}

<div class="container mt-4">

    <div class="row">

        <!-- LEFT SIDE -->
        <div class="col-md-8">

            <!-- Share box -->
            <div class="d-flex align-items-center border rounded-4 p-3 mb-4">
                <input type="text" class="form-control me-3" placeholder="Share Some Information" />
                <button class="btn btn-dark px-4">Share</button>
            </div>

            <!-- POSTS -->
            @foreach (DataRow p in Model.Posts.Rows)
            {
                <div class="p-4 mb-4 bg-light rounded-4" style="background-color:#e8f0fa !important;">
                    <div class="d-flex align-items-center mb-2">
                        <div class="rounded-circle bg-secondary me-2" style="width:40px; height:40px;"></div>
                        <strong>@p["Sh_Email"]</strong>
                    </div>
                    <p class="mb-0">@p["Description"]</p>
                </div>
            }

        </div>

        <!-- RIGHT SIDE -->
        <div class="col-md-4">
            @if (Model.role == "Sheikh")
            {                
                <!-- MEMBERS -->
                <h5 class="fw-bold mb-2">MEMBERS</h5>
                

                <!-- Add members-->
                <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#AddMemberModal">ADD</button>


                <!-- Confirmation Modal -->
                <div class="modal fade" id="AddMemberModal" tabindex="-1" aria-labelledby="AddMemberModallable" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">
                            <form method="post" asp-page-handler="Addmember">
                                Enter the email of the person you want to add
                                <input asp-for="addmemberemail" />
                                <input asp-for="Name" type="hidden" />
                                <button type="submit">Add</button>
                                <span asp-validation-for="addmemberemail"></span>
                            </form>
                        </div>
                    </div>
                </div>
                
                
                
                <hr class="mt-0"/>

                @foreach (DataRow m in Model.Members.Rows)
                {
                    <div class="d-flex align-items-center justify-content-between mb-2">
                        <span> @m["Participant_Email"] </span>

                        @if (false)
                        {
                            <div>
                                <button class="btn btn-outline-danger btn-sm">Deny</button>
                                <button class="btn btn-outline-success btn-sm">Accept</button>
                            </div>
                        }
                        else
                        {
                            <form method="post" asp-page-handler="Removeuser">
                                <input asp-for="Name" type="hidden" />
                                <input name="email" value="@m["Participant_Email"]" type="hidden" />
                                <button class="btn btn-outline-dark btn-sm" type="submit">Kick out</button>
                            </form>
                        }
                    </div>
                }
            }
        </div>

    </div>
</div>

